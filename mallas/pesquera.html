<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ingeniería Pesquera - Malla Curricular</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f4f8fb;
      margin: 0;
      padding: 1rem;
    }
    h1 {
      text-align: center;
    }
    .semestre {
      margin-bottom: 2rem;
      padding: 1rem;
      border-radius: 10px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .semestre h2 {
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.5rem;
    }
    .asignaturas {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .asignatura {
      flex: 1 1 calc(25% - 1rem);
      padding: 1rem;
      border-radius: 10px;
      color: #fff;
      position: relative;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .asignatura:hover {
      transform: scale(1.03);
    }
    .asignatura .nombre {
      font-weight: bold;
    }
    .asignatura .estrellita {
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 1.5rem;
    }
    .tooltip {
      font-size: 0.9rem;
      color: #444;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ingeniería Pesquera</h1>
  <div id="contenedor-malla"></div>

  <script>
    const totalCreditos = 174;
    const creditosNecesarios = Math.floor(totalCreditos * 0.3); // 30%

    const coloresArea = {
      formación_general: "#C00000",
      formación_complementaria: "#F96F07",
      formación_segundo_idioma: "#D9E1F2",
      formación_investigativa: "#808080",
      ciencias_matemáticas: "#740063"
      ciencias_físicas: "#FFC000",
      ciencias_químicas: "#1F5616",
      ciencias_biológicas: "#3C5D0F",
      ciencias_estadísticas: "#29196B",
      alimentos: "#FFD966"
      pesquerías: "#192B4F",
      acuicultura: "#245A8C",
      electivas_de_profundización: "#A50021",
    };

    const mallaPesquera = [
  {
    semestre: 1,
    asignaturas: [
      { nombre: "Biología", creditos: 4, tipo: "teórica/práctica", area: "ciencias_biológicas", prerrequisito: "", aprobado: false },
      { nombre: "Cálculo Diferencial", creditos: 4, tipo: "teórica", area: "ciencias_matemáticas", prerrequisito: "", aprobado: false },
      { nombre: "Dibujo para Ingeniería", creditos: 2, tipo: "teórica", area: "formación_general", prerrequisito: "", aprobado: false },
      { nombre: "Introducción a la Ingeniería Pesquera", creditos: 2, tipo: "teórica", area: "formación_complementaria", prerrequisito: "", aprobado: false },
      { nombre: "Procesos Lectores y Escriturales", creditos: 2, tipo: "teórica", area: "formación_general", prerrequisito: "", aprobado: false },
      { nombre: "Razonamiento y Representación Matemáticas", creditos: 2, tipo: "teórica", area: "formación_general", prerrequisito: "", aprobado: false },
      { nombre: "General English I", creditos: 2, tipo: "teórica", area: "formación_segundo_idioma", prerrequisito: "", aprobado: false }
    ]
  },
  {
    semestre: 2,
    asignaturas: [
      { nombre: "Biología de Rec. Acuáticos", creditos: 3, tipo: "teórica/práctica", area: "ciencias_biológicas", prerrequisito: "Biología", aprobado: false },
      { nombre: "Cálculo Integral", creditos: 4, tipo: "teórica", area: "ciencias_matemáticas", prerrequisito: "Cálculo Diferencial", aprobado: false },
      { nombre: "Expresión Oral y Argumentación", creditos: 2, tipo: "teórica", area: "formación_general", prerrequisito: "Procesos Lectores y Escriturales", aprobado: false },
      { nombre: "Física Mecánica", creditos: 4, tipo: "teórica/práctica", area: "ciencias_físicas", prerrequisito: "Cálculo Diferencial", aprobado: false },
      { nombre: "Química General", creditos: 4, tipo: "teórica/práctica", area: "ciencias_químicas", prerrequisito: "", aprobado: false },
      { nombre: "General English II", creditos: 2, tipo: "teórica", area: "formación_segundo_idioma", prerrequisito: "General English I", aprobado: false }
    ]
  },
  {
    semestre: 3,
    asignaturas: [
      { nombre: "Calor y Ondas", creditos: 4, tipo: "teórica/práctica", area: "ciencias_físicas", prerrequisito: "Física Mecánica", aprobado: false },
      { nombre: "Biología de Rec. Acuáticos", creditos: 3, tipo: "teórica/práctica", area: "ciencias_biológicas", prerrequisito: "Biología", aprobado: false },
      { nombre: "Estática", creditos: 3, tipo: "teórica/práctica", area: "ciencias_físicas", prerrequisito: "Física Mecánica", aprobado: false },
      { nombre: "Probabilidad y Estadística", creditos: 3, tipo: "teórica", area: "ciencias_estadísticas", prerrequisito: "Cálculo Integral", aprobado: false },
      { nombre: "Química Orgánica", creditos: 4, tipo: "teórica/práctica", area: "ciencias_químicas", prerrequisito: "Química General", aprobado: false },
      { nombre: "General English III", creditos: 2, tipo: "teórica", area: "formación_segundo_idioma", prerrequisito: "General English II", aprobado: false }
    ]
  },
  {
    semestre: 4,
    asignaturas: [
      { nombre: "Diseño y Prototipado", creditos: 2, tipo: "teórica", area: "formación_investigativa", prerrequisito: "30%", aprobado: false },
      { nombre: "Ecología Acuática", creditos: 2, tipo: "teórica", area: "ciencias_biológicas", prerrequisito: "Biología de Rec. Acuáticos", aprobado: false },
      { nombre: "Electricidad y Magnetismo", creditos: 4, tipo: "teórica/práctica", area: "ciencias_físicas", prerrequisito: "Calor y Ondas", aprobado: false },
      { nombre: "Estadística Inferencial", creditos: 3, tipo: "teórica", area: "ciencias_estadísticas", prerrequisito: "Probabilidad y Estadística", aprobado: false },
      { nombre: "Fisiología de Orgn, Acuáticos", creditos: 3, tipo: "teórica/práctica", area: "ciencias_biológicas", prerrequisito: "Biología de Rec. Acuáticos", aprobado: false },
      { nombre: "Termodinámica", creditos: 3, tipo: "teórica/práctica", area: "ciencias_físicas", prerrequisito: "Calor y Ondas", aprobado: false },
      { nombre: "General English IV", creditos: 2, tipo: "teórica", area: "formación_segundo_idioma", prerrequisito: "General English III", aprobado: false }
    ]
  },
  {
    semestre: 5,
    asignaturas: [
      { nombre: "Biología Pesquera", creditos: 3, tipo: "teórica", area: "ciencias_estadísticas", prerrequisito: "Estadística Inferencial", aprobado: false },
      { nombre: "Bioquímica", creditos: 4, tipo: "teórica/práctica", area: "ciencias_químicas", prerrequisito: "Química Orgánica", aprobado: false },
      { nombre: "Cultivo de Moluscos", creditos: 2, tipo: "teórica/práctica", area: "acuacultura", prerrequisito: "Fisiología de Orgn. Acuáticos", aprobado: false },
      { nombre: "Embarcaciones Pesqueras", creditos: 3, tipo: "teórica", area: "pesquerías", prerrequisito: "Estática", aprobado: false },
      { nombre: "Mecánica de Fluidos", creditos: 4, tipo: "teórica/práctica", area: "ciencias_físicas", prerrequisito: "Ecuaciones Difernciales", aprobado: false },
      { nombre: "General English V", creditos: 2, tipo: "teórica", area: "formación_segundo_idioma", prerrequisito: "General English IV", aprobado: 
    ]
  },
  {
    semestre: 6,
    asignaturas: [
      { nombre: "Bromatología", creditos: 3, tipo: "teórica", area: "ciencias_químicas", prerrequisito: "Bioquímica", aprobado: false },
      { nombre: "Cátedra Global", creditos: 2, tipo: "teórica", area: "formación_general", prerrequisito: "", aprobado: false },
      { nombre: "Cultivo de Crustaceos", creditos: 2, tipo: "teórica/práctica", area: "acuacultura", prerrequisito: "Cultivo de Moluscos", aprobado: false },
      { nombre: "Evaluación de Rec. Pesqueros", creditos: 2, tipo: "teórica", area: "ciencias_estadísticas", prerrequisito: "Biología Pesquera", aprobado: false },
      { nombre: "Limnología", creditos: 2, tipo: "teórica", area: "ciencias_biológicas", prerrequisito: "Ecología Acuática", aprobado: false },
      { nombre: "Metodología de la Investigación", creditos: 2, tipo: "teórica", area: "formación_investigativa", prerrequisito: "Diseño y Prototipado", aprobado: false },
      { nombre: "Navegación", creditos: 2, tipo: "teórica", area: "pesquerías", prerrequisito: "Embarcaciones Pesqueras", aprobado: false },
      { nombre: "Operaciones Unitarias", creditos: 2, tipo: "teórica", area: "alimentos", prerrequisito: "Termodinámica", aprobado: false },
    ]
  },
  {
    semestre: 7,
    asignaturas: [
      { nombre: "Electiva I", creditos: 2, tipo: "teórica", area: "electivas_de_profundización", prerrequisito: "", aprobado: false },
      { nombre: "Formación Humanística y Ciudadana", creditos: 2, tipo: "teórica", area: "formación_general", prerrequisito: "", aprobado: false },
      { nombre: "Génetica Aplic. a la Acuicultura", creditos: 3, tipo: "teórica/práctica", area: "acuacultura", prerrequisito: "Bioquímica", aprobado: false },
      { nombre: "Hidroacústica", creditos: 2, tipo: "teórica", area: "pesquerías", prerrequisito: "Embarcaciones Pesqueras", aprobado: false },
      { nombre: "Ing. de Artes de Pesca I", creditos: 2, tipo: "teórica", area: "pesquerías", prerrequisito: "Embarcaciones Pesqueras", aprobado: false },
      { nombre: "Microbiología de Alimentos", creditos: 3, tipo: "teórica", area: "alimentos", prerrequisito: "Bromatología", aprobado: false },
      { nombre: "Propuesta de Investigación", creditos: 2, tipo: "teórica", area: "formación_investigativa", prerrequisito: "Metodología de la Investigación", aprobado: false },
      { nombre: "Tecno. de Prod. Pesqueros I", creditos: 3, tipo: "teórica", area: "alimentos", prerrequisito: "Bromatología", aprobado: false },
    ]
  },
  {
    semestre: 8,
    asignaturas: [
      { nombre: "Electiva II", creditos: 2, tipo: "teórica", area: "electivas_de_profundización", prerrequisito: "Electiva I", aprobado: false },
      { nombre: "Economía Pesquera", creditos: 2, tipo: "teórica", area: "ciencias_estadísticas", prerrequisito: "Evaluación de Rec. Pesqueros", aprobado: false },
      { nombre: "Extensión y Desarrollo Rural", creditos: 2, tipo: "teórica/práctica", area: "formación_complementaria", prerrequisito: "70%", aprobado: false },
      { nombre: "Frio en la Industria Pesquera", creditos: 3, tipo: "teórica", area: "alimentos", prerrequisito: "Operaciones Unitarias", aprobado: false },
      { nombre: "Ing. de Artes de Pesca II", creditos: 2, tipo: "teórica", area: "pesquerías", prerrequisito: "Ing. de Artes de Pesca I", aprobado: false },
      { nombre: "Nutrición de Orgn. Acuáticos", creditos: 2, tipo: "teórica/práctica", area: "acuacultura", prerrequisito: "Microbiología de Alimentos", aprobado: false },
      { nombre: "Proyecto Culminante de Diseño", creditos: 2, tipo: "teórica", area: "formación_investigativa", prerrequisito: "Propuesta de Investigación", aprobado: false },
      { nombre: "Tecno. de Prod. Pesqueros II", creditos: 3, tipo: "teórica", area: "alimentos", prerrequisito: "Tecno. de Prod. Pesqueros I", aprobado: false },
    ]
  },
  {
    semestre: 9,
    asignaturas: [
      { nombre: "Cultivo de Peces", creditos: 3, tipo: "teórica/práctica", area: "acuicultura", prerrequisito: "Limnología", aprobado: false },
      { nombre: "Ética en Ingeniería Pesquera", creditos: 2, tipo: "teórica/práctica", area: "formación_complementaria", prerrequisito: "80%", aprobado: false },
      { nombre: "Ingeniería de Proyectos", creditos: 3, tipo: "teórica/práctica", area: "formación_complementaria", prerrequisito: "70%", aprobado: false },
      { nombre: "Modelado y Simulación de Ecosistemas", creditos: 3, tipo: "teórica", area: "ciencias_estadísticas", prerrequisito: "Evaluación de Rec. Pesqueros", aprobado: false },
      { nombre: "Maquinaria Pesquera", creditos: 3, tipo: "teórica", area: "pesquerías", prerrequisito: "Ing. de Artes de Pesca I", aprobado: false },
      { nombre: "Oceanografía Pesquera", creditos: 3, tipo: "teórica", area: "pesquerías", prerrequisito: "Ing. de Artes de Pesca I", aprobado: false },
      { nombre: "Patología de Orgn. Acuáticos", creditos: 3, tipo: "teórica/práctica", area: "acuicultura", prerrequisito: "Nutrición de Orgn. Acuáticos", aprobado: false },
    ]
  },
  {
    semestre: 10,
    asignaturas: [
      { nombre: "Electiva III", creditos: 2, tipo: "teórico/práctica", area: "electivas_de_profundización", prerrequisito: "Electiva II", aprobado: false },
      { nombre: "Instalaciones Acuícolas", creditos: 3, tipo: "teórica/práctica", area: "acuicultura", prerrequisito: "Cultivo de Peces", aprobado: false },
      { nombre: "Planta de Procesos Pesqueros", creditos: 3, tipo: "teórica", area: "alimentos", prerrequisito: "Tecno. de Prod. Pesqueros II", aprobado: false }
    ]
  }
];
    
    const contenedor = document.getElementById("contenedor-malla");

    function calcularCreditosAprobados() {
      return mallaPesquera.flatMap(s => s.asignaturas)
        .filter(a => a.aprobado)
        .reduce((sum, a) => sum + a.creditos, 0);
    }

    function renderMalla() {
      contenedor.innerHTML = "";

      const creditosAprobados = calcularCreditosAprobados();
      let desbloquearHasta = 1;

      for (let i = 0; i < mallaPesquera.length - 1; i++) {
        const algunaAprobada = mallaPesquera[i].asignaturas.some(a => a.aprobado);
        if (algunaAprobada) desbloquearHasta = i + 2;
      }

      mallaPesquera.forEach((semestre, idx) => {
        if (idx + 1 > desbloquearHasta) return;

        const divSemestre = document.createElement("div");
        divSemestre.className = "semestre";
        divSemestre.innerHTML = `<h2>Semestre ${semestre.semestre}</h2>`;

        const divAsignaturas = document.createElement("div");
        divAsignaturas.className = "asignaturas";

        semestre.asignaturas.forEach(asig => {
          let desbloqueada = true;
          let tooltip = "";

          if (asig.prerrequisito === "30%") {
            desbloqueada = creditosAprobados >= creditosNecesarios;
            tooltip = `Requiere 30% de créditos: ${creditosNecesarios} (tienes ${creditosAprobados})`;
          } else if (asig.prerrequisito) {
            desbloqueada = mallaPesquera.some(s =>
              s.asignaturas.some(a => a.nombre === asig.prerrequisito && a.aprobado)
            );
            if (!desbloqueada) {
              tooltip = `Requiere: ${asig.prerrequisito}`;
            }
          }

          const card = document.createElement("div");
          card.className = "asignatura";
          card.style.backgroundColor = desbloqueada
            ? coloresArea[asig.area] || "#aaa"
            : "#ccc";
          
          card.innerHTML = `
            <div class="nombre">${asig.nombre}</div>
            <div class="tooltip">${tooltip}</div>
          `;

          if (desbloqueada) {
            card.onclick = () => {
              asig.aprobado = !asig.aprobado;
              renderMalla();
            };
          }

          divAsignaturas.appendChild(card);
        });

        divSemestre.appendChild(divAsignaturas);
        contenedor.appendChild(divSemestre);
      });
    }

    renderMalla();
  </script>
</body>
</html>
